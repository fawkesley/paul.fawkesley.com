<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <title>GPG For Humans, Part 2: Public Key Crypto Primer</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    <link type="application/atom+xml" rel="alternate" href="https://www.paulfurley.com/feed.xml" title="Paul Fawkesley, Engineer" />

    <!-- Font-Awesome -->
    <link rel="stylesheet" href="/css/vendor/font-awesome/font-awesome.min.css">

    <!-- Google Webfonts -->
    <link href="https://fonts.googleapis.com/css?family=Martel" rel="stylesheet">

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">

    <!-- Styles -->
    <link rel="stylesheet" href="/css/site.css">

    <!--[if lt IE 9]>
        <script src="/js/vendor/google/html5-3.6-respond-1.1.0.min.js"></script>
    <![endif]-->

    <!-- Open Graph tags -->
    <meta property="og:site_name" content="www.paulfurley.com" />
    <meta property="og:title" content="GPG For Humans, Part 2: Public Key Crypto Primer" />
    

    
      <meta content="Public-key or “asymmetric” crypto is a cunning piece of maths (which I happily
don’t understand) that’s at the heart of GPG. The incredible thing it allows is
for us to communicate securely (signing and encryption) without having agreed a
secret in advance. This turns out to be a big deal.

In GPG you create a pair of keys which are fundamentally related. One half is your secret or private key, which you keep strictly to yourself. The other half is your public key which you tell everyone about, if you so wish.

This brings us back to part 1 on signing and encryption. If I know your public key, I can use it to encrypt a message that only your secret key can unlock. Even I can’t unlock it once I’ve encrypted it.

Furthermore, you can use your secret key to create a signature. If I know your public key then I can verify that the signature came from your secret key by using your public key.


  public key - encrypt messages to owner, verify signatures by owner
  secret key - decrypt messages to owner, create signatures by owner


Clearly, it’s very important to properly verify that a public key belongs to who you think it does. There is absolutely nothing to stop someone from creating a keypair using someone else’s email address and pretend it really belongs to that person. In fact, this isn’t theoretical - it has actually happened to developers. We’ll go into key verification in more detail later - for now, suffice to say that public keys have fingerprints which must be carefully verified, preferably in person.

So what’s a fingerprint?

Key IDs &amp; Fingerprints

Unfortunately GPG has three (at least?) ways of identifying a key. Here are the three ways for my current public key:


  Short ID, for example AD1B5517
  Long ID, for example 0x309F635DAD1B5517
  Fingerprint, for example A999 B749 8D1A 8DC4 73E5 3C92 309F 635D AD1B 5517


To cut a long story short, don’t ever use short ids - they are not secure. But do be aware of them as you are likely to encounter them - alas, not everyone is using long ids yet 

The fingerprint is what you use to compare and verify a key. Supposing you knew me well enough to identify me in person. It would be fairly easy to acquire and verify my public key, perhaps like this:


  You search a keyserver for my email address, and it shows you a key with id 0x309F635DAD1B5517
  You download key 0x309F635DAD1B5517 and examine its fingerprint
  You meet me (in person) and ask me to read my key’s fingerprint.
  You verify every single digit of the fingerprint.
  You sign my key to say that you’ve verified it belongs to me.


In this ideal scenario, you’d have a pretty good idea that I owned the public key you’d just downloaded. Now you could send me an encrypted email or verify a message or file that I’ve signed.

Keyservers

Keyservers are a way of sharing public keys and knowledge of who has verified which keys. We’ll cover these more later, but for now a word of warning: you cannot delete keys from a keyserver, so they will hang around forever. It’s possible to expire and revoke them, but they’ll still be present in search results. I would advise that you don’t send any keys to a keyserver just yet.

Homework!

Enough theory - let’s get stuck in! There are loads of resources online to help. Don’t worry about security at this point - we’ll be doing secure key generation step-by-step later on.


  Configure gnupg.conf to show long ids and fingerprints (see https://help.riseup.net/en/security/message-security/openpgp/best-practices)
  Generate an RSA key pair with 4096 bits and an expiry of one week.
  Have a play with `gpg --list-keys` and `gpg --edit-key &lt;long id&gt;`
  Try and find &amp; download my key from a keyserver using paul@paulfurley.com (hint: `--search-keys` and `--recv-keys`)


Any thoughts, get in touch.
" property="og:description">
    

    
      <meta content="article" property="og:type">
    

    <meta name="twitter:site" content="@fawkesley">


    <script>
      if(navigator.doNotTrack != "1") {
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-37077969-1', 'auto');
        ga('send', 'pageview');
      } else {
        console.debug("Respecting Do-Not-Track, not loading analytics. See https://www.paulfurley.com/google-analytics-dnt/");
      }
    </script>


</head>


<body>
    <header class="page-header">
      <div class="container">
        <a href="/" class="site-title">Paul Fawkesley</a>
      </div>
    </header>


<article class="blog-post container" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    <time pubdate itemprop="datePublished" datetime="2014-11-11T00:00:00+00:00" content="2014-11-11T00:00:00+00:00">November 2014</time>
  </header>
	<span style="display: none" itemprop="author publisher" itemscope itemtype="http://schema.org/Person">
		<span itemprop="name">
			Paul Fawkesley
		</span>
	</span>

<h1 itemprop="headline">GPG For Humans, Part 2: Public Key Crypto Primer</h1>

<p>Public-key or “asymmetric” crypto is a cunning piece of maths (which I happily
don’t understand) that’s at the heart of GPG. The incredible thing it allows is
for us to communicate securely (signing and encryption) without having agreed a
secret in advance. This turns out to be a big deal.</p>

<p>In GPG you create a <em>pair</em> of keys which are fundamentally related. One half is your <em>secret</em> or <em>private</em> key, which you keep strictly to yourself. The other half is your <em>public</em> key which you tell everyone about, if you so wish.</p>

<p>This brings us back to <a title="GPG For Humans, Part 1: Why Care About Cryptography?" href="https://paulfurley.com/gpg-for-humans-why-care-about-cryptography/" target="_blank">part 1</a> on signing and encryption. If I know your <em>public</em> key, I can use it to encrypt a message that only your <em>secret</em> key can unlock. Even I can’t unlock it once I’ve encrypted it.</p>

<p>Furthermore, you can use your secret key to create a signature. If I know your public key then I can verify that the signature came from your secret key by using your public key.</p>

<ul>
  <li><strong>public key</strong> - encrypt messages to owner, verify signatures by owner</li>
  <li><strong>secret key</strong> - decrypt messages to owner, create signatures by owner</li>
</ul>

<p>Clearly, it’s very important to properly verify that a public key belongs to who you think it does. There is absolutely nothing to stop someone from creating a keypair using someone else’s email address and pretend it really belongs to that person. In fact, this isn’t theoretical - it has actually happened to developers. We’ll go into key verification in more detail later - for now, suffice to say that public keys have <em>fingerprints</em> which must be carefully verified, preferably in person.</p>

<p>So what’s a fingerprint?</p>

<h2 id="key-ids--fingerprints">Key IDs &amp; Fingerprints</h2>

<p>Unfortunately GPG has three (at least?) ways of identifying a key. Here are the three ways for my current public key:</p>

<ol>
  <li>Short ID, for example <code class="highlighter-rouge">AD1B5517</code></li>
  <li>Long ID, for example <code class="highlighter-rouge">0x309F635DAD1B5517</code></li>
  <li>Fingerprint, for example <code class="highlighter-rouge">A999 B749 8D1A 8DC4 73E5 3C92 309F 635D AD1B 5517</code></li>
</ol>

<p>To cut a long story short, <em>don’t ever use short ids</em> - <a href="http://yro.slashdot.org/story/11/12/27/0044242/gnupg-short-id-collision-has-occurred" target="_blank">they are not secure</a>. But do be aware of them as you are likely to encounter them - alas, not everyone is using long ids yet <img src="https://paulfurley.com/wp-includes/images/smilies/icon_sad.gif" alt=":(" class="wp-smiley" /></p>

<p>The fingerprint is what you use to compare and verify a key. Supposing you knew me well enough to identify me in person. It would be fairly easy to acquire and verify my public key, perhaps like this:</p>

<ol>
  <li>You search a keyserver for my email address, and it shows you a key with id <code class="highlighter-rouge">0x309F635DAD1B5517</code></li>
  <li>You download key <code class="highlighter-rouge">0x309F635DAD1B5517</code> and examine its fingerprint</li>
  <li>You meet me (in person) and ask me to read my key’s fingerprint.</li>
  <li>You verify every single digit of the fingerprint.</li>
  <li>You <em>sign</em> my key to say that you’ve verified it belongs to me.</li>
</ol>

<p>In this ideal scenario, you’d have a pretty good idea that I owned the public key you’d just downloaded. Now you could send me an encrypted email or verify a message or file that I’ve signed.</p>

<h2 id="keyservers">Keyservers</h2>

<p>Keyservers are a way of sharing public keys and knowledge of who has verified which keys. We’ll cover these more later, but for now a word of warning: you cannot delete keys from a keyserver, so they will hang around forever. It’s possible to expire and revoke them, but they’ll still be present in search results. I would advise that you don’t send any keys to a keyserver just yet.</p>

<h2 id="homework">Homework!</h2>

<p>Enough theory - let’s get stuck in! There are loads of resources online to help. Don’t worry about security at this point - we’ll be doing secure key generation step-by-step later on.</p>

<ol>
  <li>Configure gnupg.conf to show long ids and fingerprints (see <a href="https://help.riseup.net/en/security/message-security/openpgp/best-practices" target="_blank">https://help.riseup.net/en/security/message-security/openpgp/best-practices</a>)</li>
  <li>Generate an RSA key pair with 4096 bits and an expiry of one week.</li>
  <li>Have a play with <code class="highlighter-rouge">`gpg --list-keys`</code> and <code class="highlighter-rouge">`gpg --edit-key &lt;long id&gt;`</code></li>
  <li>Try and find &amp; download my key from a keyserver using paul@paulfurley.com (hint: <code class="highlighter-rouge">`--search-keys`</code> and <code class="highlighter-rouge">`--recv-keys`</code>)</li>
</ol>

<p>Any thoughts, <a title="Contact" href="https://paulfurley.com/contact/" target="_blank">get in touch</a>.</p>


</article>



  <aside class="container related-blog-posts">
    <h3>Related</h3>
    <ul class="tales-list">
        
        
        <li><a href="/gpg-for-humans-why-care-about-cryptography/">
          GPG For Humans, Part 1: Why Care About Cryptography?
        </a></li>
        
        
        
        
        
        <li><a href="/gpg-for-humans-protecting-your-primary-key/">
          GPG For Humans, Part 3: Protecting your Primary Key
        </a></li>
        
        
        
        <li><a href="/gpg-for-humans-preparing-an-offline-machine/">
          GPG For Humans, Part 4: Preparing an Offline Machine
        </a></li>
        
        
    </ul>
  </aside>


  <footer class="page-footer">
    <div class="container">
      <div class="row">
        <div class="col-half">

          <h3> <i class="fa fa-star"></i> Highlights</h3>
          <ul class="tales-list">
            <li><a href="https://www.fluidkeys.com">PGP Software for Teams: Fluidkeys</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="/randomize-your-wifi-mac-address-on-ubuntu-1604-xenial/">Randomize your WiFi MAC address on Ubuntu 16.04</a></li>
            
            
            
            
            
            <li><a href="/expirybot-emails-pgp-users-before-their-key-expires/">Expirybot emails PGP users before their key expires</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="/building-software-users-love/">Building Software Users Love</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            
            <li><a href="/resisting-the-urge-to-build/">Resisting the Urge to Build</a></li>
            
            
            
            
            
            
            
            <li><a href="/arduino-isnt-just-for-hackers/">Arduino Isn't Just For Hackers</a></li>
            
            
            
            
            
            
            
            
            
            
            
            
            
            
          </ul>
        </div>

        <div class="col-half">
          <a id="contact"></a>
          <h3> <i class="fa fa-envelope"></i> Contact Me</h3>

          <p>Feedback, freelancing, ideas or anything else, <a href="/contact/">drop me a line.</a></p>

	  <p>PGP: <a href="/pgp">A999 B749 8D1A 8DC4 73E5  3C92 309F 635D AD1B 5517</a></p>
          <p>Mastodon: <a rel="me" href="https://mastodon.me.uk/@paul">paul@mastodon.me.uk</a></p>

          <a href="http://www.drupalhandboek.nl/moralecompensation.php?s=937"><div style="height: 0px; width: 0px;"></div></a>


        </div>
      </div>
    </div>
  </footer>

</body>

</html>

